
# 要件

## デバイス

- [ ] ATOM Lite+NeoPixel環境で動作すること
- [x] WiFiを使用すること

## Document-Viewについて(High)

- [ ] Documentsはパブリッシャーであること
- [ ] Viewはサブスクライバーであること
- [ ] DocumentsとViewはオブザーバーが常に監視するオブザーバーパターンを適用すること
- [ ] ViewのWebサーバーはWebServerを使用していること
- [ ] ~~iotConfのページはAutoConnectの外部ページ機能に表示させること~~
- [ ] ~~ファミコンフォントは維持していること~~
- [ ] ~~ファミコンCSSはSPIFFSに保存すること~~
- [ ] ~~ドキュメントクラスの中ににステートの生成処理を作成すること？？？~~
- [ ] ESP32MSGraphアクティブクラスの外から、ステートとパブリッシャーをアタッチすること
- [ ] なるべくクラス間を疎にすること（あたりまえか）

## コントローラについて(State) (Mideum)

- [x] stateパターンを使用すること
- [x] setup()とloop()だけでドライブすること
- [x] WiFiクライアントはAutoConnectとすること
- [ ] ~~もしできれば汎用的なWiFiクライアントを使用できるようにコールバック関数を用意すること（LOW）~~
- [x] StateクラスはDocumentクラスのポインタを持つこと
- [x] Stateクラスは遷移時に次の状態へDocumentインスタンスのポインタを渡すこと
- [ ] G39ボタンを押すとESP32はリセットすること
- [x] タイムアウトを考慮した処理を追加すること
  - [x] デバイスコードを再取得する周期は１５秒とすること
  - [x] リフレッシュトークンの再取得周期はexpire秒とすること
- [ ] 
## WiFiについて(Higest)

- [x] Connect.hppを改修して再利用すること
- [x] WiFiの接続状態をクラス外から取得するメソッドを備えていること
- [x] URIと表示するHTMLをクラス外から設定して表示できること
- [x] Documentクラスのプロパティとして実装すること
- [x] AutoConnectが表示するHTMLから設定された設定値はDocumentクラスに保存できること
  - [x] ユーザーID（既定値）  
  - [x] テナントID
  - [x] ユーザーコード
- [x] AutoConnecでユーザーID、テナントIDを設定できること。
  - [x] 192.168.4.1のHTML画面でユーザーID、テナントIDを設定できること
- [ ]~~AutoConnectユニットが簡単にとりはずせること~~
  - ~~ステートマシン内で完結したい。~~
